<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Subscription and outputs</title>
    <meta name="description" content="Documentation for MQTli - CLI client for MQTT">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Sans+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="/mqtli/assets/normalize.css?v=1757081721"
        media="screen" />
    <link rel="stylesheet" type="text/css" href="/mqtli/assets/doctave-style.css?v=1757081721"
        media="screen" />
    <link rel="stylesheet" type="text/css" href="/mqtli/assets/katex.css?v=1757081721" media="screen" />
    <link rel="stylesheet" type="text/css" href="/mqtli/assets/prism-ghcolors.css?v=1757081721"
        media="screen" />

    <script>
        var DOCTAVE_TIMESTAMP = "1757081721";
        var BASE_PATH = "/mqtli/";
        var color = localStorage.getItem('doctave-color')

        if (color === 'dark') {
            document.getElementsByTagName('html')[0].classList.remove('light');
            document.getElementsByTagName('html')[0].classList.add('dark');
        } else {
            document.getElementsByTagName('html')[0].classList.remove('dark');
            document.getElementsByTagName('html')[0].classList.add('light');
        }
    </script>

    
</head>

<body>
    <label for='menu-toggle-switch' class='menu-toggle-button'>
        ☰
    </label>
    <input type="checkbox" id="menu-toggle-switch" value='0' />
    <div class='page'>
        <div class='header'>
            <div class='logo'>
                
                <h2 class='project-name'>
                    <a href="/mqtli/">
                        MQTli - CLI client for MQTT
                    </a>
                </h2>
            </div>
            <div class='search'>
                <form id='search-form'>
    <input type='text' id='search-box' autocomplete="off" placeholder="Search..."></input>
    <span class='search-icon'>S</span>
    <ul id='search-results'></ul>
</form>

            </div>
            <div class='header-dummy-right'>
            </div>
        </div>
        <div class='container'>
            <div class='sidebar-left'>
                <nav class='site-nav'>
    <ul>
        
            <li><a href="/mqtli/quickstart">Quickstart</a></li>
            
        
            <li><a href="/mqtli/modes">Operating Modes</a></li>
            
        
            <li><a href="/mqtli/config/concept">Conceptual Overview</a></li>
            
        
            <li><a href="/mqtli/config">Configuration</a></li>
            
                <ul>
    
        <li><a href="/mqtli/config/mqtt_broker_connect">Broker connection</a></li>
        
    
        <li><a href="/mqtli/config/sql_storage">SQL storage</a></li>
        
    
        <li><a href="/mqtli/config/topic">Topics</a></li>
        
            <ul>
    
        <li><a href="/mqtli/config/topic/payload_and_input_types">Payload types and publish input types</a></li>
        
    
        <li><a href="/mqtli/config/topic/publish">Publish and triggers</a></li>
        
    
        <li><a class="active" href="/mqtli/config/topic/subscription">Subscription and outputs</a></li>
        
    
        <li><a href="/mqtli/config/topic/filter">Filters</a></li>
        
    
</ul>

        
    
</ul>

            
        
    </ul>
    <span id='light-dark-mode-switch'>
        <svg xmlns="http://www.w3.org/2000/svg" id="dark-mode-icon" viewBox="0 0 20 20" fill="currentColor">
            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
        </svg>

        <svg xmlns="http://www.w3.org/2000/svg" id="light-mode-icon" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd" />
        </svg>
    </span>
</nav>

            </div>
            <div class='doctave-content'>
                <h1 id="subscription-and-outputs">Subscription and outputs</h1>
<p>Use these settings to control how incoming messages are handled on a subscribed topic: enable/disable the subscription, choose the QoS, decide how the payload is rendered, and send it to one or more targets such as console, files, another topic, or an SQL database. You can also chain filters to transform messages before output.</p>
<h2 id="enabled">Enabled</h2>
<p>Turn the subscription on or off for this topic.</p>
<ul>
<li>Values: true | false.</li>
<li>Default: true.</li>
<li>How to set in YAML: subscription.enabled</li>
</ul>
<h2 id="qos">QoS</h2>
<p>Set the Quality of Service level to use when receiving messages.</p>
<ul>
<li>Values: 0 | 1 | 2.</li>
<li>Default: 0.</li>
<li>How to set in YAML: subscription.qos</li>
</ul>
<h2 id="outputs">Outputs</h2>
<p>Declare one or more outputs for received messages, each with its own format and target.</p>
<ul>
<li>Values: list of output objects.</li>
<li>Default: empty list.</li>
<li>How to set in YAML: subscription.outputs</li>
</ul>
<h2 id="output-—-format.type">Output — format.type</h2>
<p>Choose how the message is rendered for this output.</p>
<ul>
<li>Values: see Payload types page (e.g., json, yaml, text, hex, base64, raw, protobuf, sparkplug).</li>
<li>Default: text (if omitted for some targets) — specify explicitly for clarity.</li>
<li>How to set in YAML: subscription.outputs[].format.type</li>
</ul>
<h2 id="output-—-target-(console)">Output — target (console)</h2>
<p>Print messages to the console.</p>
<ul>
<li>Values: type: console.</li>
<li>Default: console is assumed if target omitted.</li>
<li>How to set in YAML: subscription.outputs[].target.type: console</li>
</ul>
<h2 id="output-—-target-(file)">Output — target (file)</h2>
<p>Write messages to a file on disk.</p>
<ul>
<li>Values:
<ul>
<li>path: file path (string) — required</li>
<li>overwrite: bool (default false)</li>
<li>prepend: string (optional)</li>
<li>append: string (default "\n")</li>
</ul>
</li>
<li>How to set in YAML: subscription.outputs[].target.{path,overwrite,prepend,append}</li>
</ul>
<h2 id="output-—-target-(topic)">Output — target (topic)</h2>
<p>Forward the received payload to another MQTT topic.</p>
<ul>
<li>Values:
<ul>
<li>topic: string</li>
<li>qos: 0|1|2 (default 0)</li>
<li>retain: true|false (default false)</li>
</ul>
</li>
<li>How to set in YAML: subscription.outputs[].target.{topic,qos,retain}</li>
</ul>
<h2 id="output-—-target-(sql)">Output — target (sql)</h2>
<p>Insert each received payload into a database using a custom SQL statement.</p>
<ul>
<li>Values:
<ul>
<li>insert_statement: string</li>
</ul>
</li>
<li>How to set in YAML: subscription.outputs[].target.insert_statement (plus top‑level sql_storage configured)</li>
</ul>
<h2 id="filters">Filters</h2>
<p>Optionally transform received messages before output using a chain of filters.</p>
<ul>
<li>Values: list of filters; see <a href="filter.md">Filters page</a></li>
<li>Default: empty list.</li>
<li>How to set in YAML: subscription.filters</li>
</ul>
<h2 id="yaml-example">YAML example</h2>
<pre><code class="language-yaml">subscription:
  enabled: true
  qos: 0
  outputs:
    - format: { type: json }
      target: { type: console }
    - format: { type: base64 }
      target:
        type: file
        path: log.txt
        overwrite: false
        prepend: "MESSAGE: "
        append: "\n"
    - format: { type: text }
      target:
        type: topic
        topic: other/topic
        qos: 0
        retain: false
  filters:
    - type: extract_json
      jsonpath: $.name
</code></pre>
<h2 id="more-examples">More examples</h2>
<p>Example 1 — Console + file outputs</p>
<pre><code class="language-yaml">subscription:
  enabled: true
  qos: 1
  outputs:
    - format: { type: yaml }
      target: { type: console }
    - format: { type: text }
      target:
        type: file
        path: received.txt
        overwrite: false
        append: "\n"
</code></pre>
<p>Example 2 — Forward to another topic with QoS/retain</p>
<pre><code class="language-yaml">subscription:
  enabled: true
  qos: 0
  outputs:
    - format: { type: raw }
      target:
        type: topic
        topic: archive/raw
        qos: 1
        retain: true
</code></pre>
<p>Example 3 — Insert into SQL and extract a field</p>
<pre><code class="language-yaml">subscription:
  enabled: true
  outputs:
    - format: { type: json }
      target:
        type: sql
        insert_statement: |
          INSERT INTO messages(ts, payload_json)
          VALUES (CURRENT_TIMESTAMP, ?);
  filters:
    - type: extract_json
      jsonpath: $.data
</code></pre>

            </div>
            <div class='sidebar-right'>
                <div class='page-nav' id='page-nav'>
                    <p class='page-nav-header'>On this page</p>
                    <ul>
                        
                        <li class='page-nav-level-1'>
                            <a href='#subscription-and-outputs'>Subscription and outputs</a>
                        </li>
                        
                        <li class='page-nav-level-2'>
                            <a href='#enabled'>Enabled</a>
                        </li>
                        
                        <li class='page-nav-level-2'>
                            <a href='#qos'>QoS</a>
                        </li>
                        
                        <li class='page-nav-level-2'>
                            <a href='#outputs'>Outputs</a>
                        </li>
                        
                        <li class='page-nav-level-2'>
                            <a href='#output-—-format.type'>Output — format.type</a>
                        </li>
                        
                        <li class='page-nav-level-2'>
                            <a href='#output-—-target-(console)'>Output — target (console)</a>
                        </li>
                        
                        <li class='page-nav-level-2'>
                            <a href='#output-—-target-(file)'>Output — target (file)</a>
                        </li>
                        
                        <li class='page-nav-level-2'>
                            <a href='#output-—-target-(topic)'>Output — target (topic)</a>
                        </li>
                        
                        <li class='page-nav-level-2'>
                            <a href='#output-—-target-(sql)'>Output — target (sql)</a>
                        </li>
                        
                        <li class='page-nav-level-2'>
                            <a href='#filters'>Filters</a>
                        </li>
                        
                        <li class='page-nav-level-2'>
                            <a href='#yaml-example'>YAML example</a>
                        </li>
                        
                        <li class='page-nav-level-2'>
                            <a href='#more-examples'>More examples</a>
                        </li>
                        
                    </ul>
                </div>
            </div>
            <div class='wave-container'>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
                    <path fill-opacity="0.35"
                        d="M0,192L60,213.3C120,235,240,277,360,277.3C480,277,600,235,720,192C840,149,960,107,1080,122.7C1200,139,1320,213,1380,250.7L1440,288L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z">
                    </path>
                    <path fill-opacity="0.5"
                        d="M0,160L60,181.3C120,203,240,245,360,229.3C480,213,600,139,720,138.7C840,139,960,213,1080,229.3C1200,245,1320,203,1380,181.3L1440,160L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z">
                    </path>
                    <path fill-opacity="0.2"
                        d="M0,224L60,197.3C120,171,240,117,360,117.3C480,117,600,171,720,186.7C840,203,960,181,1080,186.7C1200,192,1320,224,1380,240L1440,256L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z">
                    </path>
                </svg>
                <p>Powered by <a href='https://cli.doctave.com' target='_blank'>Doctave</a></p>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="/mqtli/assets/katex.js?v=1757081721"></script>
    <script type="text/javascript" src="/mqtli/assets/mermaid.js?v=1757081721"></script>
    <script type="text/javascript" src="/mqtli/assets/elasticlunr.js?v=1757081721"></script>
    <script type="text/javascript" src="/mqtli/assets/prism.js?v=1757081721"></script>
    <script type="text/javascript" src="/mqtli/assets/doctave-app.js?v=1757081721"></script>

    
</body>

</html>