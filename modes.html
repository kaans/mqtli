<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Operating Modes</title>
    <meta name="description" content="Documentation for MQTli - CLI client for MQTT">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Sans+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="/mqtli/assets/normalize.css?v=1757081721"
        media="screen" />
    <link rel="stylesheet" type="text/css" href="/mqtli/assets/doctave-style.css?v=1757081721"
        media="screen" />
    <link rel="stylesheet" type="text/css" href="/mqtli/assets/katex.css?v=1757081721" media="screen" />
    <link rel="stylesheet" type="text/css" href="/mqtli/assets/prism-ghcolors.css?v=1757081721"
        media="screen" />

    <script>
        var DOCTAVE_TIMESTAMP = "1757081721";
        var BASE_PATH = "/mqtli/";
        var color = localStorage.getItem('doctave-color')

        if (color === 'dark') {
            document.getElementsByTagName('html')[0].classList.remove('light');
            document.getElementsByTagName('html')[0].classList.add('dark');
        } else {
            document.getElementsByTagName('html')[0].classList.remove('dark');
            document.getElementsByTagName('html')[0].classList.add('light');
        }
    </script>

    
</head>

<body>
    <label for='menu-toggle-switch' class='menu-toggle-button'>
        ☰
    </label>
    <input type="checkbox" id="menu-toggle-switch" value='0' />
    <div class='page'>
        <div class='header'>
            <div class='logo'>
                
                <h2 class='project-name'>
                    <a href="/mqtli/">
                        MQTli - CLI client for MQTT
                    </a>
                </h2>
            </div>
            <div class='search'>
                <form id='search-form'>
    <input type='text' id='search-box' autocomplete="off" placeholder="Search..."></input>
    <span class='search-icon'>S</span>
    <ul id='search-results'></ul>
</form>

            </div>
            <div class='header-dummy-right'>
            </div>
        </div>
        <div class='container'>
            <div class='sidebar-left'>
                <nav class='site-nav'>
    <ul>
        
            <li><a href="/mqtli/quickstart">Quickstart</a></li>
            
        
            <li><a class="active" href="/mqtli/modes">Operating Modes</a></li>
            
        
            <li><a href="/mqtli/config/concept">Conceptual Overview</a></li>
            
        
            <li><a href="/mqtli/config">Configuration</a></li>
            
                <ul>
    
        <li><a href="/mqtli/config/mqtt_broker_connect">Broker connection</a></li>
        
    
        <li><a href="/mqtli/config/sql_storage">SQL storage</a></li>
        
    
        <li><a href="/mqtli/config/topic">Topics</a></li>
        
            <ul>
    
        <li><a href="/mqtli/config/topic/payload_and_input_types">Payload types and publish input types</a></li>
        
    
        <li><a href="/mqtli/config/topic/publish">Publish and triggers</a></li>
        
    
        <li><a href="/mqtli/config/topic/subscription">Subscription and outputs</a></li>
        
    
        <li><a href="/mqtli/config/topic/filter">Filters</a></li>
        
    
</ul>

        
    
</ul>

            
        
    </ul>
    <span id='light-dark-mode-switch'>
        <svg xmlns="http://www.w3.org/2000/svg" id="dark-mode-icon" viewBox="0 0 20 20" fill="currentColor">
            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
        </svg>

        <svg xmlns="http://www.w3.org/2000/svg" id="light-mode-icon" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd" />
        </svg>
    </span>
</nav>

            </div>
            <div class='doctave-content'>
                <h1 id="operating-modes">Operating Modes</h1>
<p>MQTli can run in one of four mutually exclusive modes. You select a mode via a CLI argument. If no mode is specified, the default is multi topic mode.</p>
<h2 id="selecting-a-mode">Selecting a mode</h2>
<p>You select the operating mode with the --mode CLI argument (or the MODE environment variable). If you omit the flag entirely, MQTli starts in the default multi_topic mode. For example, running mqtli without arguments launches multi_topic; specifying mqtli --mode subscribe activates the subscribe-only behavior; mqtli --mode publish starts a session intended for sending data; and mqtli --mode sparkplug enables the Sparkplug-specific monitoring features. Only one mode can be active at a time in a single run.</p>
<h3 id="multi-topic-(default)">Multi topic (default)</h3>
<p>In multi_topic mode, MQTli operates entirely from a configuration file and can simultaneously subscribe to many topics and publish to others. This is the most capable mode: it allows you to define subscriptions with multiple outputs (console, files, SQL, or forwarding to another topic), publishers driven by triggers (periodic timers or reactions to incoming messages), and chains of filters that transform payloads. The configuration file is required in this mode because it is the source of truth for topics and their behavior. Without a topics list in the file, no automatic subscribe or publish actions will occur. Broker connection settings may be provided on the CLI, via environment variables, or in the configuration file; whichever source you prefer will work.</p>
<p>To select multi topic mode, nothing has to be specified as it is the default.</p>
<h3 id="subscribe-only">Subscribe only</h3>
<p>Subscribe mode focuses on receiving messages and printing or otherwise handling them based on CLI/ENV settings. It is intended for single-topic use in a given invocation: you typically point MQTli at one topic or pattern to monitor, in contrast to the default multi topic mode which is designed to orchestrate multiple subscriptions and publishers at once via a configuration file. You do not need a configuration file for subscribe mode. If you provide one anyway, MQTli will read only the broker and other top‑level settings from it and will intentionally ignore any topics defined there. The topics list from YAML is not consulted in this mode. You can still control the broker connection parameters entirely from the CLI and environment variables if you prefer.</p>
<p>To select subscribe only mode, use: <code>mqtli subscribe</code></p>
<h3 id="publish-only">Publish only</h3>
<p>Publish mode is intended for sending messages, and it targets single-topic publishing in a given run. You typically push data to one MQTT topic from the command line, unlike the multi topic mode which coordinates multiple publishers and subscriptions defined in a configuration file. This mode is driven by CLI/ENV options rather than a YAML topics list. A configuration file is not required. If a file is present, only the broker and other top‑level settings are used; any topics entries in the file are ignored while this mode is active. As with subscribe mode, you can provide all connection details on the command line or through environment variables.</p>
<p>To select publish only mode, use: <code>mqtli publish</code></p>
<h3 id="sparkplug-mode">Sparkplug mode</h3>
<p>Sparkplug mode is designed to monitor a network of Sparkplug devices. When you enable this mode, MQTli subscribes to the predefined Sparkplug topics and decodes payloads accordingly. A configuration file is optional. If you supply one, its broker and top‑level settings are honored. Topic entries in the file are optional and, by default, are ignored in Sparkplug mode; if you want to include them in addition to the Sparkplug subscriptions, pass the --include-topics-from-file flag. You can further tailor Sparkplug subscriptions by selecting a default QoS with --qos (or SPARKPLUG_QOS) and by restricting the monitored groups using --include-group (or its short form --ig) with a comma‑separated list. If you do not set a QoS, QoS 0 is used.</p>
<p>To select sparkplug mode, use: <code>mqtli sp</code> or <code>mqtli sparkplug</code></p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="config">Top‑level settings</a></li>
<li><a href="config/topic">Topic configuration</a></li>
<li><a href="config/topic/payload_and_input_types.md">Sparkplug payloads</a></li>
</ul>

            </div>
            <div class='sidebar-right'>
                <div class='page-nav' id='page-nav'>
                    <p class='page-nav-header'>On this page</p>
                    <ul>
                        
                        <li class='page-nav-level-1'>
                            <a href='#operating-modes'>Operating Modes</a>
                        </li>
                        
                        <li class='page-nav-level-2'>
                            <a href='#selecting-a-mode'>Selecting a mode</a>
                        </li>
                        
                        <li class='page-nav-level-3'>
                            <a href='#multi-topic-(default)'>Multi topic (default)</a>
                        </li>
                        
                        <li class='page-nav-level-3'>
                            <a href='#subscribe-only'>Subscribe only</a>
                        </li>
                        
                        <li class='page-nav-level-3'>
                            <a href='#publish-only'>Publish only</a>
                        </li>
                        
                        <li class='page-nav-level-3'>
                            <a href='#sparkplug-mode'>Sparkplug mode</a>
                        </li>
                        
                        <li class='page-nav-level-2'>
                            <a href='#see-also'>See also</a>
                        </li>
                        
                    </ul>
                </div>
            </div>
            <div class='wave-container'>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
                    <path fill-opacity="0.35"
                        d="M0,192L60,213.3C120,235,240,277,360,277.3C480,277,600,235,720,192C840,149,960,107,1080,122.7C1200,139,1320,213,1380,250.7L1440,288L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z">
                    </path>
                    <path fill-opacity="0.5"
                        d="M0,160L60,181.3C120,203,240,245,360,229.3C480,213,600,139,720,138.7C840,139,960,213,1080,229.3C1200,245,1320,203,1380,181.3L1440,160L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z">
                    </path>
                    <path fill-opacity="0.2"
                        d="M0,224L60,197.3C120,171,240,117,360,117.3C480,117,600,171,720,186.7C840,203,960,181,1080,186.7C1200,192,1320,224,1380,240L1440,256L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z">
                    </path>
                </svg>
                <p>Powered by <a href='https://cli.doctave.com' target='_blank'>Doctave</a></p>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="/mqtli/assets/katex.js?v=1757081721"></script>
    <script type="text/javascript" src="/mqtli/assets/mermaid.js?v=1757081721"></script>
    <script type="text/javascript" src="/mqtli/assets/elasticlunr.js?v=1757081721"></script>
    <script type="text/javascript" src="/mqtli/assets/prism.js?v=1757081721"></script>
    <script type="text/javascript" src="/mqtli/assets/doctave-app.js?v=1757081721"></script>

    
</body>

</html>